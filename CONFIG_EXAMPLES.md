# –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (—Ç–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω–µ–π—à–∏–µ –∑–∞—è–≤–∫–∏)

–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å–∞–º—ã—Ö –∫—Ä—É–ø–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –±–ª–∏–∑–∫–æ –∫ —Ü–µ–Ω–µ:

```env
MIN_ORDER_SIZE_USD=5000000
MIN_ORDER_SIZE_USD_OVERRIDES=BTC:8000000,ETH:6000000
MAX_DISTANCE_PERCENT=0.1
ALERT_COOLDOWN_MS=300000
LOG_LEVEL=info
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ó–∞—è–≤–∫–∏ –æ—Ç 5–ú$
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ 0.1% –æ—Ç —Ü–µ–Ω—ã
- –ù–µ —á–∞—â–µ 1 –∞–ª–µ—Ä—Ç–∞ –≤ 5 –º–∏–Ω—É—Ç –Ω–∞ –∑–∞—è–≤–∫—É
- –ú–∏–Ω–∏–º—É–º —à—É–º–∞, —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã

---

## –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

–•–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–ª–µ—Ä—Ç–æ–≤ –∏ –∏—Ö –≤–∞–∂–Ω–æ—Å—Ç—å—é:

```env
MIN_ORDER_SIZE_USD=2000000
MIN_ORDER_SIZE_USD_OVERRIDES=BTC:4000000,ETH:3000000
MAX_DISTANCE_PERCENT=0.2
ALERT_COOLDOWN_MS=60000
LOG_LEVEL=info
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ó–∞—è–≤–∫–∏ –æ—Ç 2–ú$
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ 0.2% (–≥–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞ Hyperliquid)
- –ù–µ —á–∞—â–µ 1 –∞–ª–µ—Ä—Ç–∞ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –∑–∞—è–≤–∫—É
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤

---

## –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (–≤—Å–µ –∑–Ω–∞—á–∏–º—ã–µ –∑–∞—è–≤–∫–∏)

–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –≤–∞–∂–Ω—ã—Ö –∑–∞—è–≤–æ–∫:

```env
MIN_ORDER_SIZE_USD=500000
MAX_DISTANCE_PERCENT=0.5
ALERT_COOLDOWN_MS=30000
LOG_LEVEL=info
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ó–∞—è–≤–∫–∏ –æ—Ç 500–ö$
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ 0.5% –æ—Ç —Ü–µ–Ω—ã
- –ù–µ —á–∞—â–µ 1 –∞–ª–µ—Ä—Ç–∞ –≤ 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞—è–≤–∫—É
- –ë–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤, —Ç—Ä–µ–±—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

---

## –°–∫–∞–ª—å–ø–∏–Ω–≥ / –í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è

–î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤, —Å–ª–µ–¥—è—â–∏—Ö –∑–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è–º–∏:

```env
MIN_ORDER_SIZE_USD=1000000
MAX_DISTANCE_PERCENT=0.15
ALERT_COOLDOWN_MS=15000
LOG_LEVEL=info
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ó–∞—è–≤–∫–∏ –æ—Ç 1–ú$
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ 0.15%
- –ù–µ —á–∞—â–µ 1 –∞–ª–µ—Ä—Ç–∞ –≤ 15 —Å–µ–∫—É–Ω–¥
- –ë—ã—Å—Ç—Ä—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞

---

## –°–≤–∏–Ω–≥ —Ç—Ä–µ–π–¥–∏–Ω–≥ / –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è

–î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∫—Ä—É–ø–Ω—ã–µ —É—Ä–æ–≤–Ω–∏:

```env
MIN_ORDER_SIZE_USD=3000000
MAX_DISTANCE_PERCENT=0.3
ALERT_COOLDOWN_MS=600000
LOG_LEVEL=info
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ó–∞—è–≤–∫–∏ –æ—Ç 3–ú$
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ 0.3%
- –ù–µ —á–∞—â–µ 1 –∞–ª–µ—Ä—Ç–∞ –≤ 10 –º–∏–Ω—É—Ç
- –§–æ–∫—É—Å –Ω–∞ –∫—Ä—É–ø–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –ø–æ–¥–¥–µ—Ä–∂–∫–∏/—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è

---

## –¢–µ—Å—Ç–æ–≤—ã–π / –û—Ç–ª–∞–¥–æ—á–Ω—ã–π

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:

```env
MIN_ORDER_SIZE_USD=100000
MAX_DISTANCE_PERCENT=1.0
ALERT_COOLDOWN_MS=5000
LOG_LEVEL=debug
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ó–∞—è–≤–∫–∏ –æ—Ç 100–ö$
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ 1%
- –ù–µ —á–∞—â–µ 1 –∞–ª–µ—Ä—Ç–∞ –≤ 5 —Å–µ–∫—É–Ω–¥
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏
- **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω - –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –∞–ª–µ—Ä—Ç–æ–≤!**

---

## –¢–æ–ª—å–∫–æ —Ç–æ–ø –º–æ–Ω–µ—Ç—ã

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã, –Ω—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥.

–í `src/orderbook-monitor.ts`, –º–µ—Ç–æ–¥ `start()`:

```typescript
async start(): Promise<void> {
  // ... existing code ...

  // –í–º–µ—Å—Ç–æ subscribeToAllAssets –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
  const topCoins = ['BTC', 'ETH', 'SOL', 'ARB', 'OP', 'MATIC'];
  
  for (const coin of topCoins) {
    this.hyperliquid.subscribeToOrderBook(coin, (snapshot) => {
      this.processOrderBook(snapshot);
    });
  }

  // ... rest of code ...
}
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### MIN_ORDER_SIZE_USD

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å:**
1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ä–µ–¥–Ω—é—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö —Ç–æ—Ä–≥—É–µ–º—ã—Ö –º–æ–Ω–µ—Ç
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ—Ä–æ–≥ –Ω–∞ —É—Ä–æ–≤–Ω–µ 2-5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –¥–Ω–µ–≤–Ω–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–ø —É—Ä–æ–≤–Ω—è
3. –î–ª—è BTC/ETH: 2-5–ú$ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
4. –î–ª—è –∞–ª—å—Ç–∫–æ–∏–Ω–æ–≤: 500–ö-1–ú$ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ

### MAX_DISTANCE_PERCENT

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å:**
1. –ì–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞ Hyperliquid ~0.2%
2. –î–ª—è –∑–∞—è–≤–æ–∫ –≤ —Å—Ç–∞–∫–∞–Ω–µ: 0.1-0.2%
3. –î–ª—è –∑–∞—è–≤–æ–∫ –Ω–µ–º–Ω–æ–≥–æ –¥–∞–ª—å—à–µ: 0.3-0.5%
4. –ë–æ–ª—å—à–µ 1% - –æ–±—ã—á–Ω–æ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞ (–∑–∞—è–≤–∫–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ)

### ALERT_COOLDOWN_MS

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å:**
1. –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ —Å—Ç–∏–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
2. –°–∫–∞–ª—å–ø–∏–Ω–≥: 10-30 —Å–µ–∫—É–Ω–¥
3. –í–Ω—É—Ç—Ä–∏–¥–Ω–µ–≤–Ω–∞—è: 30-60 —Å–µ–∫—É–Ω–¥
4. –°–≤–∏–Ω–≥: 5-10 –º–∏–Ω—É—Ç
5. –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è: 10-60 –º–∏–Ω—É—Ç

**–°–æ–≤–µ—Ç:** –ù–∞—á–Ω–∏—Ç–µ —Å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

---

## –¢–æ—Ä–≥–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã (TRADE_ENTRY_MODE)

### –¢–æ–ª—å–∫–æ —Ä—ã–Ω–æ—á–Ω—ã–π –≤—Ö–æ–¥ (MARKET)

–ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Ä–µ–∂–∏–º: –≤—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –º–∞—Ä–∫–µ—Ç-–æ—Ä–¥–µ—Ä–∞–º–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏.

```env
TRADE_ENABLED=true
TRADE_MODE=TRADE_PAPER
TRADE_ENTRY_MODE=MARKET
TRADE_POSITION_SIZE_USD=1000
TRADE_TP_NATR_LEVELS=2,3
TRADE_TP_PERCENTS=50,50
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ –≤ –ø–æ–∑–∏—Ü–∏—é
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- –í–æ–∑–º–æ–∂–µ–Ω –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
- TP –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ —Ä—ã–Ω–∫—É –∏–ª–∏ –ª–∏–º–∏—Ç–∫–∞–º–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç TRADE_TP_LIMIT_PROPORTIONS)

---

### –¢–æ–ª—å–∫–æ –ª–∏–º–∏—Ç–Ω—ã–π –≤—Ö–æ–¥ (LIMIT)

–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π —Ä–µ–∂–∏–º: –≤—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ª–∏–º–∏—Ç–Ω—ã–º–∏ –æ—Ä–¥–µ—Ä–∞–º–∏, —Ä–∞–∑–º–µ—â—ë–Ω–Ω—ã–º–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏.

```env
TRADE_ENABLED=true
TRADE_MODE=TRADE_PAPER
TRADE_ENTRY_MODE=LIMIT
TRADE_POSITION_SIZE_USD=1000

# –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.2,0.4]
TRADE_ENTRY_LIMIT_PROPORTIONS=50,50
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=50

# TP –ª–∏–º–∏—Ç–∫–∞–º–∏
TRADE_TP_NATR_LEVELS=2,3
TRADE_TP_PERCENTS=50,50
TRADE_TP_LIMIT_PROPORTIONS=50,50
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –õ—É—á—à–∞—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞
- –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –ø—Ä–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
- TP –ª–∏–º–∏—Ç–∫–∞–º–∏ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.2,0.4]` - –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–∫ –≤ NATR –æ—Ç —Ü–µ–Ω—ã –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
  - –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è = –∑–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é (–¥–ª—è –ª–æ–Ω–≥–∞ - –Ω–∏–∂–µ, –¥–ª—è —à–æ—Ä—Ç–∞ - –≤—ã—à–µ)
  - –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è = –ø–µ—Ä–µ–¥ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é (–¥–ª—è –ª–æ–Ω–≥–∞ - –≤—ã—à–µ, –¥–ª—è —à–æ—Ä—Ç–∞ - –Ω–∏–∂–µ)
- `TRADE_ENTRY_LIMIT_PROPORTIONS=50,50` - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ –ø–æ –ª–∏–º–∏—Ç–∫–∞–º (2 –æ—Ä–¥–µ—Ä–∞ –ø–æ 50%)
- `TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=50` - –ø–æ—Ä–æ–≥ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ (—Å–Ω–∏–º–∞–µ–º –æ—Ä–¥–µ—Ä–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –¥–æ 50%)

---

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—Ö–æ–¥ (MIXED)

–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º: —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Ä—ã–Ω–∫—É, —á–∞—Å—Ç—å –ª–∏–º–∏—Ç–∫–∞–º–∏.

```env
TRADE_ENABLED=true
TRADE_MODE=TRADE_PAPER
TRADE_ENTRY_MODE=MIXED
TRADE_POSITION_SIZE_USD=1000

# –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: 50% –ø–æ —Ä—ã–Ω–∫—É, 50% –ª–∏–º–∏—Ç–∫–∞–º–∏
TRADE_ENTRY_MARKET_PERCENT=50
TRADE_ENTRY_LIMIT_PERCENT=50

# –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω–æ–π —á–∞—Å—Ç–∏
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.2,0.4]
TRADE_ENTRY_LIMIT_PROPORTIONS=25,25,25,25
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=50

# TP –ª–∏–º–∏—Ç–∫–∞–º–∏
TRADE_TP_NATR_LEVELS=2,3
TRADE_TP_PERCENTS=50,50
TRADE_TP_LIMIT_PROPORTIONS=33,33,34
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—Ö–æ–¥ (—Ä—ã–Ω–æ—á–Ω–∞—è —á–∞—Å—Ç—å) + —É–ª—É—á—à–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã (–ª–∏–º–∏—Ç–Ω–∞—è —á–∞—Å—Ç—å)
- –ì–∏–±–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∫–∞–º–∏

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
- `50,50` = 2 –ª–∏–º–∏—Ç–∫–∏ –ø–æ 50% –∫–∞–∂–¥–∞—è
- `25,25,25,25` = 4 –ª–∏–º–∏—Ç–∫–∏ –ø–æ 25% –∫–∞–∂–¥–∞—è
- `33,33,34` = 3 –ª–∏–º–∏—Ç–∫–∏ (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 100%)

---

### –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Å–∫–∞–ª—å–ø–∏–Ω–≥ —Å –ª–∏–º–∏—Ç–∫–∞–º–∏

–î–ª—è –±—ã—Å—Ç—Ä—ã—Ö –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ–º:

```env
TRADE_ENTRY_MODE=MIXED
TRADE_ENTRY_MARKET_PERCENT=30
TRADE_ENTRY_LIMIT_PERCENT=70
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.1,0.2]
TRADE_ENTRY_LIMIT_PROPORTIONS=50,50
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=70

TRADE_TP_NATR_LEVELS=1.5,2.5
TRADE_TP_PERCENTS=70,30
TRADE_TP_LIMIT_PROPORTIONS=50,50
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- 30% –ø–æ —Ä—ã–Ω–∫—É (–±—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥)
- 70% –ª–∏–º–∏—Ç–∫–∞–º–∏ –±–ª–∏–∑–∫–æ –∫ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ (70%)
- –ë—ã—Å—Ç—Ä—ã–µ TP —É—Ä–æ–≤–Ω–∏

---

### –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π —Å–≤–∏–Ω–≥ —Å —à–∏—Ä–æ–∫–∏–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º

–î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π —Å —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–º –Ω–∞–±–æ—Ä–æ–º:

```env
TRADE_ENTRY_MODE=MIXED
TRADE_ENTRY_MARKET_PERCENT=20
TRADE_ENTRY_LIMIT_PERCENT=80
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.5,0.5]
TRADE_ENTRY_LIMIT_PROPORTIONS=20,20,20,20,20
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=30

TRADE_TP_NATR_LEVELS=3,5,7
TRADE_TP_PERCENTS=40,30,30
TRADE_TP_LIMIT_PROPORTIONS=50,50
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- 20% –ø–æ —Ä—ã–Ω–∫—É (–º–∏–Ω–∏–º—É–º)
- 80% –ª–∏–º–∏—Ç–∫–∞–º–∏ –≤ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
- –ù–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ (30% - —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –∂–¥—ë–º)
- –®–∏—Ä–æ–∫–∏–µ TP —É—Ä–æ–≤–Ω–∏

---

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∏—Å–∫–∞ üÜï

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –ø–æ–¥ –∫–∞–∂–¥—É—é –º–æ–Ω–µ—Ç—É:

```env
TRADE_ENABLED=true
TRADE_MODE=TRADE_PAPER
TRADE_ENTRY_MODE=MARKET

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∏—Å–∫–∞
TRADE_POSITION_SIZE_USD=0  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ
TRADE_MAX_RISK_PER_TRADE=5  # –†–∏—Å–∫ 5 USD –Ω–∞ —Å–¥–µ–ª–∫—É
TRADE_RISK_NATR_MULTIPLIER=2  # SL –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 2 NATR

TRADE_TP_NATR_LEVELS=2,3
TRADE_TP_PERCENTS=50,50
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
–ú–æ–Ω–µ—Ç–∞: BTC
NATR (5m, 14): 0.5%
–ú–Ω–æ–∂–∏—Ç–µ–ª—å: 2
‚Üí –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ SL = 0.5% √ó 2 = 1%

–†–∏—Å–∫: 5 USD
‚Üí –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ = 5 USD / 1% = 500 USD

–ú–æ–Ω–µ—Ç–∞: SOL
NATR (5m, 14): 1.0%
–ú–Ω–æ–∂–∏—Ç–µ–ª—å: 2
‚Üí –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ SL = 1.0% √ó 2 = 2%

–†–∏—Å–∫: 5 USD
‚Üí –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ = 5 USD / 2% = 250 USD
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –º–æ–Ω–µ—Ç—ã
- –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ä–∏—Å–∫ –Ω–∞ –∫–∞–∂–¥—É—é —Å–¥–µ–ª–∫—É
- –ë–æ–ª—å—à–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å = –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- –ú–µ–Ω—å—à–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å = –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- **–ó–∞—â–∏—Ç–∞ –æ—Ç —É–±—ã—Ç–∫–æ–≤:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ PnL < -5 USD

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PnL:**
```
–° –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º TRADE_RISK_PNL_CHECK_INTERVAL_MS (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4 —Å–µ–∫):
- –†–∞—Å—á—ë—Ç —Ç–µ–∫—É—â–µ–≥–æ PnL –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- –ï—Å–ª–∏ PnL < -TRADE_MAX_RISK_PER_TRADE:
  ‚Üí –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
  ‚Üí –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –º–∞—Ä–∫–µ—Ç-–æ—Ä–¥–µ—Ä–æ–º
```

---

### –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è —Å –∂—ë—Å—Ç–∫–∏–º —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–æ–º üÜï

–î–ª—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º –Ω–∞ —Å–¥–µ–ª–∫—É:

```env
TRADE_ENABLED=true
TRADE_MODE=TRADE_PAPER
TRADE_ENTRY_MODE=MIXED

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä + –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞
TRADE_MAX_RISK_PER_TRADE=3  # –ú–∞–∫—Å. —É–±—ã—Ç–æ–∫ 3 USD
TRADE_RISK_NATR_MULTIPLIER=1.5  # –ë–ª–∏–∑–∫–∏–π SL (1.5 NATR)
TRADE_RISK_PNL_CHECK_INTERVAL_MS=2000  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ)

# –ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥
TRADE_ENTRY_MARKET_PERCENT=70
TRADE_ENTRY_LIMIT_PERCENT=30
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.1,0.2]
TRADE_ENTRY_LIMIT_PROPORTIONS=50,50
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=80

# –ë—ã—Å—Ç—Ä—ã–π –≤—ã—Ö–æ–¥
TRADE_TP_NATR_LEVELS=1,1.5
TRADE_TP_PERCENTS=60,40
TRADE_TP_LIMIT_PROPORTIONS=100  # –í—Å–µ —Ç–µ–π–∫–∏ –ª–∏–º–∏—Ç–∫–∞–º–∏
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É (3 USD)
- –ë–ª–∏–∑–∫–∏–π SL (1.5 NATR = ~0.75% –¥–ª—è BTC)
- –ë—ã—Å—Ç—Ä—ã–π –Ω–∞–±–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ (70% –ø–æ —Ä—ã–Ω–∫—É)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —É–±—ã—Ç–∫–µ > 3 USD
- –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ —Å–¥–µ–ª–æ–∫, –Ω–∏–∑–∫–∏–π risk per trade

---

### –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è —Å —ç–∫–æ–Ω–æ–º–∏–µ–π —Ä–µ—Å—É—Ä—Å–æ–≤ üÜï

–î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π —Å —Ä–µ–¥–∫–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏:

```env
TRADE_ENABLED=true
TRADE_MODE=TRADE_PAPER
TRADE_ENTRY_MODE=LIMIT

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä + —Ä–µ–¥–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
TRADE_MAX_RISK_PER_TRADE=10  # –ú–∞–∫—Å. —É–±—ã—Ç–æ–∫ 10 USD
TRADE_RISK_NATR_MULTIPLIER=3  # –®–∏—Ä–æ–∫–∏–π SL (3 NATR)
TRADE_RISK_PNL_CHECK_INTERVAL_MS=10000  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ (—ç–∫–æ–Ω–æ–º–∏—è CPU)

# –¢–æ–ª—å–∫–æ –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.5,0.5]
TRADE_ENTRY_LIMIT_PROPORTIONS=25,25,25,25
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=30

# –®–∏—Ä–æ–∫–∏–µ TP —É—Ä–æ–≤–Ω–∏
TRADE_TP_NATR_LEVELS=4,6,8
TRADE_TP_PERCENTS=40,30,30
TRADE_TP_LIMIT_PROPORTIONS=50,50
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ë–æ–ª—å—à–∏–π —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É (10 USD)
- –®–∏—Ä–æ–∫–∏–π SL (3 NATR = ~1.5% –¥–ª—è BTC)
- –†–µ–¥–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ PnL (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫)
- –≠–∫–æ–Ω–æ–º–∏—è CPU –∏ —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–≤–∏–Ω–≥-—Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—ë–º–æ–º –∏ —Ä–∏—Å–∫–æ–º (–°–ø—Ä–∏–Ω—Ç 9) üÜï

### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤–∏–ª (YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)

**–° –≤–µ—Ä—Å–∏–∏ –°–ø—Ä–∏–Ω—Ç 9 –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ YAML —Ñ–∞–π–ª!** –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–∏–±–∫–æ—Å—Ç—å –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**
```bash
# 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp policy.example.yaml policy.yaml

# 2. –í–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–∞–≤–∏–ª –≤ .env
echo "POLICY_ENABLED=true" >> .env
echo "POLICY_RULES_FILE=./policy.yaml" >> .env

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≤ policy.yaml –ø–æ–¥ —Å–≤–æ—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ .env:**

```env
# –í–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª
POLICY_ENABLED=true
POLICY_RULES_FILE=./policy.yaml  # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
POLICY_ANCHOR_MEMORY_FILE=./data/anchor_memory.json
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–ø—Ä–∏–º–µ—Ä —Å –±–∞–∑–æ–≤—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏):**
```
–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ –Ω–∞ –Ω–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ, —Å–∏–ª—å–Ω—ã–π —à–æ–∫ 60–º
BTC @ $50,000, NATR = 0.5%, shock60m = 14 NATR
–ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä: 500 USD
‚Üí –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ shock_60m_strong (–∏–∑ policy.yaml)
‚Üí –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 500 √ó 2.0 = 1000 USD
‚Üí TP levels: [2, 3, 4] √ó 1.2 = [2.4, 3.6, 4.8] NATR

–°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–µ—Ç–µ—Å—Ç —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
BTC —Å–Ω–æ–≤–∞ @ $50,000, –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–¥–µ–ª–∫–∞ –±—ã–ª–∞ 4 —á–∞—Å–∞ –Ω–∞–∑–∞–¥
‚Üí –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ anchor_retest_smaller
‚Üí –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 500 √ó 0.5 = 250 USD
‚Üí TP levels: [2, 3, 4] √ó 0.7 = [1.4, 2.1, 2.8] NATR

–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—è—Ç–∞—è –ø—Ä–æ—Ñ–∏—Ç–Ω–∞—è —Å–¥–µ–ª–∫–∞ –æ—Ç —É—Ä–æ–≤–Ω—è
BTC @ $50,000, anchorWinCount = 5
‚Üí –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ too_many_wins_on_anchor
‚Üí allowTrade = false
‚Üí –°–¥–µ–ª–∫–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

### –ü—Ä–∏–º–µ—Ä—ã YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä 1: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ç—Ä–µ–Ω–¥–∞—Ö (`policy-aggressive.yaml`)**

```yaml
rules:
  # –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ 10 –≤–∏–Ω–æ–≤
  - name: too_many_wins_on_anchor
    priority: 1
    scope: new_entry
    when:
      anchorWinCountGte: 10
    then:
      allowTrade: false

  # –°—Ä–µ–¥–Ω–∏–π —à–æ–∫ 30–º - —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä
  - name: shock_30m_medium
    priority: 10
    scope: new_entry
    when:
      shock30mNatrGte: 4
    then:
      sizeMultiplier: 1.2
      tpNatrMultiplier: 1.0

  # –°–∏–ª—å–Ω—ã–π —à–æ–∫ 60–º - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º
  - name: shock_60m_very_strong
    priority: 9
    scope: new_entry
    when:
      shock60mNatrGte: 10
    then:
      sizeMultiplier: 2.5
      tpNatrMultiplier: 1.5

  # –†–µ—Ç–µ—Å—Ç - —É–º–µ–Ω—å—à–∞–µ–º, –Ω–æ –Ω–µ —Å–∏–ª—å–Ω–æ
  - name: anchor_retest_moderate
    priority: 8
    scope: new_entry
    when:
      anchorTradeCountGte: 1
      anchorLastTradeAgoMinGte: 120  # 2 —á–∞—Å–∞
    then:
      sizeMultiplier: 0.7
      tpNatrMultiplier: 0.85

  # –î–æ–ª–≥–æ–µ —Å—Ç–æ—è–Ω–∏–µ - —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –∂–¥—ë–º
  - name: long_time_patient
    priority: 7
    scope: open_position
    when:
      timeInAnchorZoneMinGte: 60
      tpHitsCountEq: 0
    then:
      tpNatrMultiplier: 0.7
```

**–ü—Ä–∏–º–µ—Ä 2: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è —Å –∑–∞—â–∏—Ç–æ–π (`policy-conservative.yaml`)**

```yaml
rules:
  # –°—Ç—Ä–æ–≥–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ 3 –≤–∏–Ω–æ–≤
  - name: too_many_wins_on_anchor_strict
    priority: 1
    scope: new_entry
    when:
      anchorWinCountGte: 3
    then:
      allowTrade: false

  # –¢–æ–ª—å–∫–æ –ø—Ä–∏ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ–º —à–æ–∫–µ 30–º
  - name: shock_30m_very_strong_only
    priority: 10
    scope: new_entry
    when:
      shock30mNatrGte: 8
    then:
      sizeMultiplier: 1.0
      tpNatrMultiplier: 1.0

  # –û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π —à–æ–∫ 60–º - —É–º–µ—Ä–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
  - name: shock_60m_extreme
    priority: 9
    scope: new_entry
    when:
      shock60mNatrGte: 15
    then:
      sizeMultiplier: 1.3
      tpNatrMultiplier: 1.1

  # –†–µ—Ç–µ—Å—Ç - —Å–∏–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ–º
  - name: anchor_retest_very_small
    priority: 8
    scope: new_entry
    when:
      anchorTradeCountGte: 1
      anchorLastTradeAgoMinGte: 240  # 4 —á–∞—Å–∞
    then:
      sizeMultiplier: 0.3
      tpNatrMultiplier: 0.5

  # –ë—ã—Å—Ç—Ä–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º TP
  - name: quick_tp_tighten
    priority: 7
    scope: open_position
    when:
      timeInAnchorZoneMinGte: 30
      tpHitsCountEq: 0
    then:
      tpNatrMultiplier: 0.4
```

**–ü—Ä–∏–º–µ—Ä 3: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (`policy-balanced.yaml`)**

```yaml
rules:
  # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ 5 –≤–∏–Ω–æ–≤
  - name: standard_wins_limit
    priority: 1
    scope: new_entry
    when:
      anchorWinCountGte: 5
    then:
      allowTrade: false

  # –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —à–æ–∫ 30–º
  - name: shock_30m_normal
    priority: 10
    scope: new_entry
    when:
      shock30mNatrGte: 6
    then:
      sizeMultiplier: 1.0
      tpNatrMultiplier: 1.0

  # –°–∏–ª—å–Ω—ã–π —à–æ–∫ 60–º
  - name: shock_60m_strong
    priority: 9
    scope: new_entry
    when:
      shock60mNatrGte: 12
    then:
      sizeMultiplier: 1.8
      tpNatrMultiplier: 1.2

  # –†–µ—Ç–µ—Å—Ç - —É–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ
  - name: anchor_retest_smaller
    priority: 8
    scope: new_entry
    when:
      anchorTradeCountGte: 1
      anchorLastTradeAgoMinGte: 180  # 3 —á–∞—Å–∞
    then:
      sizeMultiplier: 0.5
      tpNatrMultiplier: 0.7

  # –°—Ä–µ–¥–Ω–µ–µ —Å—Ç–æ—è–Ω–∏–µ —É —è–∫–æ—Ä—è
  - name: moderate_time_near_anchor
    priority: 7
    scope: open_position
    when:
      timeInAnchorZoneMinGte: 40
      tpHitsCountEq: 0
    then:
      tpNatrMultiplier: 0.5

  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ 2+ –ª–æ—Å—Å–∞—Ö –ø–æ–¥—Ä—è–¥
  - name: consecutive_losses_block
    priority: 2
    scope: new_entry
    when:
      anchorTradeCountGte: 2
      anchorWinCountGte: 0  # –ù–∏ –æ–¥–Ω–æ–≥–æ –≤–∏–Ω–∞
    then:
      allowTrade: false
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª:**
```bash
# –í .env —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ —Å–≤–æ–µ–º—É —Ñ–∞–π–ª—É
POLICY_RULES_FILE=./policy-aggressive.yaml
# –∏–ª–∏
POLICY_RULES_FILE=./policy-conservative.yaml
```

### –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —è–∫–æ—Ä–µ–π

**–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞ –ø–∞–º—è—Ç–∏:**
```bash
cat ./data/anchor_memory.json | jq '.'
```

**–¢–æ–ø-5 —Å–∞–º—ã—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —è–∫–æ—Ä–µ–π:**
```bash
cat ./data/anchor_memory.json | jq 'sort_by(-.totalPnlUsd) | .[0:5]'
```

**–Ø–∫–æ—Ä—è —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–∏–Ω–æ–≤:**
```bash
cat ./data/anchor_memory.json | jq 'sort_by(-.winTrades) | .[0:5]'
```

**Python-–∞–Ω–∞–ª–∏–∑:**
```python
import json

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
with open('./data/anchor_memory.json', 'r') as f:
    anchors = json.load(f)

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
total_trades = sum(a['totalTrades'] for a in anchors)
total_wins = sum(a['winTrades'] for a in anchors)
win_rate = (total_wins / total_trades * 100) if total_trades > 0 else 0

print(f"–í—Å–µ–≥–æ —è–∫–æ—Ä–µ–π: {len(anchors)}")
print(f"–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: {total_trades}")
print(f"Win rate: {win_rate:.2f}%")

# –¢–æ–ø —è–∫–æ—Ä–µ–π –ø–æ –ø—Ä–∏–±—ã–ª–∏
top_anchors = sorted(anchors, key=lambda a: a['totalPnlUsd'], reverse=True)[:5]
for anchor in top_anchors:
    print(f"{anchor['anchorId']['coin']} @ {anchor['anchorId']['anchorPrice']}: "
          f"PnL={anchor['totalPnlUsd']:.2f}$, wins={anchor['winTrades']}/{anchor['totalTrades']}")
```

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤—ã—Ö –ª–∏—Å—Ç–∏–Ω–≥–æ–≤ üÜï

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–Ω–µ—Ç –Ω–∞ Hyperliquid

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–æ–Ω–µ—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –≤ Telegram:

```env
# –í–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤—ã—Ö –ª–∏—Å—Ç–∏–Ω–≥–æ–≤
LISTING_MONITOR_ENABLED=true
LISTING_NOTIFY_TELEGRAM=true
LISTING_CHECK_INTERVAL_MS=60000  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
LISTING_HISTORY_FILE=./data/listing_history.json
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–µ—Ç–µ–∫—Ü–∏—è

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –º–æ–Ω–µ—Ç—ã –∏–∑ Hyperliquid API
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–ø–∏—Å–æ–∫ –≤ `listing_history.json` (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
3. –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É (–∏–ª–∏ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª—É) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç
4. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π
5. –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –º–æ–Ω–µ—Ç–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
6. –û—Ç–º–µ—á–∞–µ—Ç –º–æ–Ω–µ—Ç—É –∫–∞–∫ —É–≤–µ–¥–æ–º–ª—ë–Ω–Ω—É—é (–±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ)

**–§–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ (`listing_history.json`):**
```json
{
  "knownCoins": ["BTC", "ETH", "SOL", "PEPE", "WIF"],
  "notifiedCoins": ["PEPE", "WIF"],
  "lastUpdate": "2024-11-17T14:30:45.123Z"
}
```

### –ü—Ä–∏–º–µ—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–û–¥–Ω–∞ –Ω–æ–≤–∞—è –º–æ–Ω–µ—Ç–∞:**
```
üÜï –ù–æ–≤—ã–π –ª–∏—Å—Ç–∏–Ω–≥ –Ω–∞ Hyperliquid!

üíé –ú–æ–Ω–µ—Ç–∞: PEPE
‚è∞ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: 17.11.2024, 14:30:45 UTC

üîç –ù–∞—á–∏–Ω–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–æ—Ç–Ω–æ—Å—Ç–µ–π...
```

**–ù–µ—Å–∫–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Å—Å–æ–≤—ã–π –ª–∏—Å—Ç–∏–Ω–≥):**
```
üÜï –ù–æ–≤—ã–µ –ª–∏—Å—Ç–∏–Ω–≥–∏ –Ω–∞ Hyperliquid!

üíé –ú–æ–Ω–µ—Ç—ã (3):
‚Ä¢ WIF
‚Ä¢ BONK
‚Ä¢ POPCAT

‚è∞ –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: 17.11.2024, 14:30:45 UTC
üîç –ù–∞—á–∏–Ω–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–æ—Ç–Ω–æ—Å—Ç–µ–π...
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| **–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è** | 30000 ms (30 —Å–µ–∫) | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ, –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ |
| **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π** | 60000 ms (1 –º–∏–Ω) | –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) |
| **–≠–∫–æ–Ω–æ–º–Ω—ã–π** | 300000 ms (5 –º–∏–Ω) | –†–µ–¥–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |

**–í–∞–∂–Ω–æ:**
- –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (< 30 —Å–µ–∫) –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å –ª–∏—à–Ω—é—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API
- –§–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ `data/listing_history.json` –Ω–µ –¥–æ–ª–∂–µ–Ω —É–¥–∞–ª—è—Ç—å—Å—è!
- –ï—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é, –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –º–æ–Ω–µ—Ç—ã –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –Ω–æ–≤—ã–º–∏ (–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)

### –ö–∞–∫ –∑–∞—Ä–∞–Ω–µ–µ –¥–µ—Ç–µ–∫—Ç–∏—Ç—å –±—É–¥—É—â–∏–µ –ª–∏—Å—Ç–∏–Ω–≥–∏?

Hyperliquid API –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—É–¥—É—â–∏—Ö –ª–∏—Å—Ç–∏–Ω–≥–∞—Ö –∑–∞—Ä–∞–Ω–µ–µ. –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ:

1. **–°–ª–µ–¥–∏—Ç—å –∑–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∞–Ω–æ–Ω—Å–∞–º–∏:**
   - Twitter: https://twitter.com/HyperliquidX
   - Discord: https://discord.gg/hyperliquid
   - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   ```env
   LISTING_CHECK_INTERVAL_MS=30000  # 30 —Å–µ–∫—É–Ω–¥
   ```
   –¢–∞–∫ –≤—ã —É–∑–Ω–∞–µ—Ç–µ –æ –ª–∏—Å—Ç–∏–Ω–≥–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –µ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–∞ –±–∏—Ä–∂–µ.

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ API meta:**
   –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç `/info` —Å —Ç–∏–ø–æ–º `meta`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–Ω–µ—Ç. –≠—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–±.

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ üÜï

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CSV

–í—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ CSV —Ñ–∞–π–ª—ã (–ø–æ –¥–Ω—è–º):

```env
TRADE_LOG_ENABLED=true
TRADE_LOG_DIR=./trade_logs
```

### –ü—Ä–∏–º–µ—Ä CSV —Ñ–∞–π–ª–∞

```csv
tradeId,coin,side,openedAt,closedAt,durationSeconds,durationMinutes,entryPrice,exitPrice,sizeUsd,pnlUsd,pnlPercent,entryFeeUsd,exitFeeUsd,totalFeeUsd,natr,maxDrawdownPercent,closeReason,entryMode,signalSource,limitOrdersUsed,tpLevelsHit
paper-1234-1,BTC,long,2024-01-15T10:30:00.000Z,2024-01-15T10:35:23.000Z,323,5.38,50000.00,50500.00,500.00,5.00,1.00,,,0.500,,tp_hit,mixed,liquidity,2,1
paper-1234-2,SOL,short,2024-01-15T11:20:15.000Z,2024-01-15T11:22:45.000Z,150,2.50,100.50,99.80,250.00,1.74,0.70,,,1.200,,emergency_stop_loss_pnl=-3.50$,market,liquidity,0,0
```

### –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**Python-–∞–Ω–∞–ª–∏–∑:**

```python
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
df = pd.read_csv('trade_logs/trades_2024-01-15.csv')

# –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
print(f"–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: {len(df)}")
print(f"Win Rate: {(df['pnlUsd'] > 0).sum() / len(df) * 100:.2f}%")
print(f"–°—Ä–µ–¥–Ω–∏–π PnL: {df['pnlUsd'].mean():.2f} USD")
print(f"–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {df['durationMinutes'].mean():.1f} –º–∏–Ω")

# –ü–æ –º–æ–Ω–µ—Ç–∞–º
print("\n–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–Ω–µ—Ç–∞–º:")
print(df.groupby('coin')['pnlUsd'].agg(['count', 'sum', 'mean']))

# –ü–æ —Ä–µ–∂–∏–º–∞–º –≤—Ö–æ–¥–∞
print("\n–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∂–∏–º–æ–≤ –≤—Ö–æ–¥–∞:")
print(df.groupby('entryMode')['pnlPercent'].agg(['count', 'mean']))
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è

### TRADE_RISK_PNL_CHECK_INTERVAL_MS

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ PnL:**

| –°—Ç–∏–ª—å —Ç–æ—Ä–≥–æ–≤–ª–∏ | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------|----------|----------|
| **–°–∫–∞–ª—å–ø–∏–Ω–≥** | 1000-2000 ms | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —É–±—ã—Ç–∫–∏, –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU |
| **–î–µ–π—Ç—Ä–µ–π–¥–∏–Ω–≥** | 3000-5000 ms | –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) |
| **–°–≤–∏–Ω–≥** | 10000-30000 ms | –†–µ–¥–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ú–µ–Ω—å—à–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª ‚Üí –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–∫—Ü–∏—è, –Ω–æ –≤—ã—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É
- –ë–æ–ª—å—à–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª ‚Üí —ç–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –î–ª—è –≤—ã—Å–æ–∫–æ–≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –º–æ–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (2000-3000 ms)
- –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 5000-10000 ms

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ < 2000 ms —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π!

---

### TRADE_ENTRY_LIMIT_NATR_RANGE

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å:**
1. –î–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ –≤—Ö–æ–¥–∞: `[-0.1, 0.2]` (–±–ª–∏–∑–∫–æ –∫ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏)
2. –î–ª—è —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ: `[-0.2, 0.4]` (—Å—Ä–µ–¥–Ω–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω)
3. –î–ª—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–≥–æ: `[-0.5, 0.5]` (—à–∏—Ä–æ–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω)
4. –Ø–∫–æ—Ä—å = —Ü–µ–Ω–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏, –º–∏–Ω—É—Å = –∑–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é, –ø–ª—é—Å = –ø–µ—Ä–µ–¥ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é

### TRADE_ENTRY_LIMIT_PROPORTIONS

**–ü—Ä–∏–º–µ—Ä—ã:**
1. `50,50` - 2 –æ—Ä–¥–µ—Ä–∞ (–ø—Ä–æ—Å—Ç–µ–π—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)
2. `25,25,25,25` - 4 –æ—Ä–¥–µ—Ä–∞ (–ª—É—á—à–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
3. `10,20,30,40` - 4 –æ—Ä–¥–µ—Ä–∞ —Å –Ω–∞—Ä–∞—Å—Ç–∞–Ω–∏–µ–º (–±–æ–ª—å—à–µ –±–ª–∏–∂–µ –∫ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏)
4. –°—É–º–º–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è –∫ 100%

### TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT

**–ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å:**
1. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ (70-90%): –±—ã—Å—Ç—Ä–æ –æ—Ç–º–µ–Ω—è–µ–º –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–π –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
2. –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ (50%): –æ—Ç–º–µ–Ω—è–µ–º –ø—Ä–∏ —Å—ä–µ–¥–∞–Ω–∏–∏ –ø–æ–ª–æ–≤–∏–Ω—ã
3. –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ (30%): —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –∂–¥—ë–º, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—ä–µ–ª–∏ –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å
4. –ß–µ–º –≤—ã—à–µ –ø—Ä–æ—Ü–µ–Ω—Ç, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –ª–∏–º–∏—Ç–∫–∏

### TRADE_TP_LIMIT_PROPORTIONS

**–ü—Ä–∏–º–µ—Ä—ã:**
1. `50,50` - 2 TP –ª–∏–º–∏—Ç–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
2. `33,33,34` - 3 TP –ª–∏–º–∏—Ç–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
3. `100` - 1 TP –ª–∏–º–∏—Ç–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
4. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, TP –±—É–¥—É—Ç –º–∞—Ä–∫–µ—Ç-–æ—Ä–¥–µ—Ä–∞–º–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã

