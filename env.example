TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_or_channel_id

# ============================================
# БЫСТРЫЙ СТАРТ ДЛЯ ТОРГОВЛИ (Paper Trading)
# ============================================
# 1. Скопируйте этот файл: cp env.example .env
# 2. Установите ваши Telegram токены выше
# 3. Измените следующие параметры:
#    TRADE_ENABLED=true
#    TRADE_MODE=TRADE_PAPER
#    TRADE_POSITION_SIZE_USD=100
# 4. Запустите: npm start
# 5. Подождите 1-2 минуты пока NATR прогреется
# 6. Готово! Бот начнет торговать в paper режиме
# ============================================

MIN_ORDER_SIZE_USD=2000000
MIN_ORDER_SIZE_USD_OVERRIDES=BTC:5000000,ETH:3000000,SOL:1000000
MAX_DISTANCE_PERCENT=0.2

ALERT_COOLDOWN_MS=60000
LOG_LEVEL=info

# Trading module (по умолчанию выключен)
TRADE_ENABLED=false
TRADE_MODE=SCREEN_ONLY # SCREEN_ONLY | TRADE_PAPER | TRADE_LIVE

# === РАЗМЕР ПОЗИЦИИ (выберите один из вариантов) ===
# Вариант 1: Фиксированный размер (простой)
TRADE_POSITION_SIZE_USD=100  # $100 на каждую сделку (если TRADE_MAX_RISK_PER_TRADE=0)

# Вариант 2: Динамический размер на основе риска (рекомендуется)
# При TRADE_MAX_RISK_PER_TRADE > 0: размер рассчитывается по формуле Risk / (NATR × Multiplier)
# Пример: Risk=$5, NATR=1%, Mult=2 → Size = $5 / (0.01 × 2) = $250
TRADE_MAX_RISK_PER_TRADE=0  # Установите 5 для макс. $5 риска на сделку
TRADE_RISK_NATR_MULTIPLIER=2  # SL = 2 NATR от точки входа
TRADE_RISK_PNL_CHECK_INTERVAL_MS=4000  # Интервал проверки PnL (4000 = 4 сек)

# Лимиты
TRADE_MAX_OPEN_POSITIONS=3

# ВАЖНО: 
# 1. Для торговли установите TRADE_ENABLED=true и TRADE_MODE=TRADE_PAPER
# 2. NATR автоматически рассчитывается из свечей Binance (не требует API ключей)
# 3. При TRADE_MAX_RISK_PER_TRADE > 0 активируется автоматический emergency SL
#    (если PnL < -TRADE_MAX_RISK_PER_TRADE, позиция закрывается автоматически)

# Логирование сделок в CSV
TRADE_LOG_ENABLED=true  # Включить логирование сделок в CSV файл
TRADE_LOG_DIR=./trade_logs  # Директория для сохранения CSV логов (по дням)

# Мониторинг новых листингов на Hyperliquid
LISTING_MONITOR_ENABLED=false  # Включить мониторинг новых листингов
LISTING_NOTIFY_TELEGRAM=true  # Отправлять уведомления о новых листингах в Telegram
LISTING_CHECK_INTERVAL_MS=60000  # Интервал проверки новых листингов (60000 = 1 минута)
LISTING_HISTORY_FILE=./data/listing_history.json  # Файл для хранения истории листингов

# Контекстное управление объёмом и риском (Спринт 9)
# Все правила настраиваются через YAML файл (см. policy.example.yaml)
POLICY_ENABLED=false  # Включить систему контекстных правил
POLICY_RULES_FILE=./policy.yaml  # YAML файл с правилами (when/then)
POLICY_ANCHOR_MEMORY_FILE=./data/anchor_memory.json  # Файл для хранения статистики по якорям

# Окна для расчета "шока" (shock) - суммарного движения NATR за период
# NATR берется с периодом TRADE_NATR_PERIOD на таймфрейме TRADE_NATR_TIMEFRAME (5m по умолчанию)
# Шок = суммарное изменение NATR за указанное окно времени
POLICY_SHOCK_WINDOW1_MIN=30  # Первое окно (минуты) → shock30mNatr в policy правилах
POLICY_SHOCK_WINDOW2_MIN=60  # Второе окно (минуты) → shock60mNatr в policy правилах
# Примеры: можно установить 15, 45, 120 и т.д. для разных стратегий

# Защита от спуферов (anti-spoofing)
# Минимальное время жизни заявки перед торговлей (мс)
# Если 0 - защита отключена, если >0 - заявка должна быть стабильна указанное время
# Рекомендуется: 3000-5000мс для защиты от быстрых снятий
TRADE_MIN_ORDER_LIFETIME_MS=0

# === NATR (Normalized Average True Range) ===
# NATR автоматически рассчитывается из свечей Binance Futures (не требует API ключей!)
# Источник данных: wss://fstream.binance.com/ws (публичный WebSocket)
# Требуется 14+ свечей для расчёта, прогрев занимает ~1-2 минуты после старта
TRADE_NATR_PERIOD=14  # Период для расчёта NATR (обычно 14)
TRADE_NATR_TIMEFRAME=5m  # Таймфрейм свечей (5m = 5 минут)

TRADE_SL_TICK_OFFSET=1
TRADE_ANCHOR_MIN_VALUE_FRACTION=0.3
TRADE_ANCHOR_MIN_VALUE_USD=300000
TRADE_DAILY_MAX_LOSS=0
TRADE_DAILY_MAX_TRADES=0
TRADE_EXECUTION_VENUE=PAPER # PAPER | HYPERLIQUID | BINANCE

# Entry Mode Configuration
TRADE_ENTRY_MODE=MARKET # MARKET | LIMIT | MIXED

# Для MIXED режима: распределение между рыночным и лимитным входом
TRADE_ENTRY_MARKET_PERCENT=50
TRADE_ENTRY_LIMIT_PERCENT=50

# Limit Order Placement Configuration (для LIMIT и MIXED режимов)
TRADE_ENTRY_LIMIT_NATR_RANGE=[-0.2,0.4]
TRADE_ENTRY_LIMIT_PROPORTIONS=50,50
TRADE_ENTRY_LIMIT_DENSITY_MIN_PERCENT=50

# Take Profit Configuration
# Уровни TP в NATR и проценты позиции на каждом уровне
TRADE_TP_NATR_LEVELS=2,3
TRADE_TP_PERCENTS=50,50

# Если указан TRADE_TP_LIMIT_PROPORTIONS, TP выставляется лимитками (рекомендуется)
# Если не указан, TP выставляется маркет-ордерами при достижении цены (старая логика)
TRADE_TP_LIMIT_PROPORTIONS=50,50

# Binance (используется только при TRADE_EXECUTION_VENUE=BINANCE и TRADE_MODE=TRADE_LIVE)
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_API_SECRET=your_binance_api_secret_here
BINANCE_FUTURES_BASE_URL=https://fapi.binance.com

# Hyperliquid (используется только при TRADE_EXECUTION_VENUE=HYPERLIQUID и TRADE_MODE=TRADE_LIVE)
HYPERLIQUID_PRIVATE_KEY=your_hyperliquid_private_key_here
HYPERLIQUID_IS_TESTNET=false

