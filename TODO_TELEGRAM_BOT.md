# TODO - Telegram Bot & Dynamic Risk Management

## üì± –°–ø—Ä–∏–Ω—Ç 10 ‚Äî Telegram Bot –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º

### –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### 10.1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `node-telegram-bot-api` –∏–ª–∏ `telegraf`
- [ ] –°–æ–∑–¥–∞—Ç—å `/src/telegram-bot/` —Å—Ç—Ä—É–∫—Ç—É—Ä—É
  - [ ] `bot.ts` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞
  - [ ] `commands.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
  - [ ] `keyboards.ts` ‚Äî inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  - [ ] `middleware.ts` ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] `userManager.ts` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `TELEGRAM_BOT_TOKEN` –≤ `.env`
- [ ] –°–æ–∑–¥–∞—Ç—å `telegram-bot-whitelist.json` –¥–ª—è –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞

#### 10.2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
- [ ] Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ `username` –≤ –±–µ–ª–æ–º —Å–ø–∏—Å–∫–µ
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/register` ‚Äî –∑–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ (–¥–ª—è –∞–¥–º–∏–Ω–∞)
- [ ] Admin –∫–æ–º–∞–Ω–¥—ã:
  - [ ] `/whitelist_add @username` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] `/whitelist_remove @username` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] `/whitelist_list` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞ (–∫—Ç–æ, –∫–æ–≥–¥–∞, —Ä–∞–∑—Ä–µ—à–µ–Ω–æ/–∑–∞–ø—Ä–µ—â–µ–Ω–æ)

#### 10.3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
- [ ] –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π: `user-configs/<telegram_user_id>.json`
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/instances` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/new_instance` ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/select_instance <id>` ‚Äî –≤—ã–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/delete_instance <id>` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å
- [ ] –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞: `stopped`, `running`, `error`

#### 10.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ Inline Keyboard
- [ ] –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:
  ```
  ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏  |  ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫/–°—Ç–æ–ø  |  üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  üí∞ API Keys   |  üìà –ü–æ–∑–∏—Ü–∏–∏      |  üìú –õ–æ–≥–∏
  ```

##### 10.4.1. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: API Keys
- [ ] Inline –º–µ–Ω—é "API Keys":
  - [ ] `Binance API` ‚Üí –≤–≤–æ–¥ –∫–ª—é—á–∞ –∏ —Å–µ–∫—Ä–µ—Ç–∞
  - [ ] `Hyperliquid Wallet` ‚Üí –≤–≤–æ–¥ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
  - [ ] `–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
- [ ] **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
  - [ ] –ü—Ä–∏ –≤–≤–æ–¥–µ —Å–µ–∫—Ä–µ—Ç–∞/–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ ‚Äî –±–æ—Ç —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è
  - [ ] –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (AES-256)
  - [ ] –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ –ª–æ–≥–∞—Ö –∏–ª–∏ UI

##### 10.4.2. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- [ ] Inline –º–µ–Ω—é "–†–µ–∂–∏–º—ã":
  - [ ] `TRADE_ENABLED` (–≤–∫–ª/–≤—ã–∫–ª)
  - [ ] `TRADE_MODE` ‚Üí –≤—ã–±–æ—Ä: `SCREEN_ONLY` / `TRADE_PAPER` / `TRADE_LIVE`
  - [ ] `TRADE_EXECUTION_VENUE` ‚Üí –≤—ã–±–æ—Ä: `PAPER` / `BINANCE` / `HYPERLIQUID`
  - [ ] `TRADE_ENTRY_MODE` ‚Üí –≤—ã–±–æ—Ä: `MARKET` / `LIMIT` / `MIXED`

##### 10.4.3. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –†–∏—Å–∫ –∏ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- [ ] Inline –º–µ–Ω—é "–†–∏—Å–∫":
  - [ ] `–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç` ‚Üí –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞:
    - [ ] `–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä` ‚Üí `TRADE_POSITION_SIZE_USD`
    - [ ] `% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞` ‚Üí `TRADE_RISK_PERCENT_OF_BALANCE`
    - [ ] `–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∏—Å–∫` ‚Üí `TRADE_MAX_RISK_PER_TRADE`
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (—á–∏—Å–ª–æ–≤–æ–π –≤–≤–æ–¥)
  - [ ] `TRADE_RISK_NATR_MULTIPLIER` ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å NATR –¥–ª—è —Ä–∏—Å–∫–∞
  - [ ] `TRADE_MAX_OPEN_POSITIONS` ‚Äî –º–∞–∫—Å. –ø–æ–∑–∏—Ü–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

##### 10.4.4. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –í—Ö–æ–¥ –≤ —Å–¥–µ–ª–∫–∏
- [ ] Inline –º–µ–Ω—é "–í—Ö–æ–¥":
  - [ ] `Market %` / `Limit %` (–¥–ª—è MIXED —Ä–µ–∂–∏–º–∞)
  - [ ] `Entry Limit NATR Range` ‚Üí `[min, max]`
  - [ ] `Entry Limit Proportions` ‚Üí —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–∫
  - [ ] `Anchor Min Value USD` ‚Äî –º–∏–Ω. —Ä–∞–∑–º–µ—Ä –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
  - [ ] `Anchor Min Value Fraction` ‚Äî –º–∏–Ω. % –æ—Å—Ç–∞—Ç–∫–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏

##### 10.4.5. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Take Profit
- [ ] Inline –º–µ–Ω—é "TP":
  - [ ] `TP NATR Levels` ‚Üí —Å–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π –≤ NATR
  - [ ] `TP Percents` ‚Üí –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
  - [ ] `TP Limit Proportions` ‚Üí —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ TP –ª–∏–º–∏—Ç–æ–∫
  - [ ] –î–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å TP

##### 10.4.6. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Policy (–°–ø—Ä–∏–Ω—Ç 9)
- [ ] Inline –º–µ–Ω—é "Policy":
  - [ ] `–í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å` Policy Engine
  - [ ] `–ó–∞–≥—Ä—É–∑–∏—Ç—å policy.yaml` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª –±–æ—Ç—É
  - [ ] `–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª
  - [ ] `–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ` ‚Üí –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
  - [ ] `Shock Windows` ‚Üí –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫–æ–Ω 1 –∏ 2

##### 10.4.7. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Anti-spoofing
- [ ] Inline –º–µ–Ω—é "Anti-spoofing":
  - [ ] `Min Order Lifetime MS` ‚Äî –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞—è–≤–∫–∏

##### 10.4.8. –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] `LOG_LEVEL` ‚Üí –≤—ã–±–æ—Ä: `info` / `debug`
- [ ] `–í–∫–ª—é—á–∏—Ç—å Trade Logger` (CSV –ª–æ–≥–∏ —Å–¥–µ–ª–æ–∫)
- [ ] `–í–∫–ª—é—á–∏—Ç—å Listing Monitor` (–∞–ª–µ—Ä—Ç—ã –æ –ª–∏—Å—Ç–∏–Ω–≥–∞—Ö)

#### 10.5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/start_trading` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/stop_trading` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/restart` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] Callback –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π `reload config`

#### 10.6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/status` ‚Äî —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤:
  - [ ] Running / Stopped / Error
  - [ ] Uptime
  - [ ] –ö–æ–ª-–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
  - [ ] PnL –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/positions` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π:
  - [ ] –ú–æ–Ω–µ—Ç–∞, —Å—Ç–æ—Ä–æ–Ω–∞, —Ä–∞–∑–º–µ—Ä, —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞
  - [ ] –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞, PnL
  - [ ] –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é"
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/trades` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–¥–µ–ª–æ–∫:
  - [ ] –ú–æ–Ω–µ—Ç–∞, —Å—Ç–æ—Ä–æ–Ω–∞, PnL, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  - [ ] –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å CSV"
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/balance` ‚Äî –±–∞–ª–∞–Ω—Å –Ω–∞ –±–∏—Ä–∂–µ:
  - [ ] Total Balance (—Å unrealized PnL)
  - [ ] Available Balance
  - [ ] Unrealized PnL
  - [ ] Margin Ratio (–¥–ª—è Binance Futures)

#### 10.7. –ê–ª–µ—Ä—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏:
  - [ ] –û—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ (–º–æ–Ω–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä, —Ü–µ–Ω–∞)
  - [ ] –ó–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ (PnL, –ø—Ä–∏—á–∏–Ω–∞)
  - [ ] –û—à–∏–±–∫–∞—Ö (API error, connection lost)
  - [ ] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö (emergency stop loss, margin call)
  - [ ] –ù–æ–≤—ã—Ö –ª–∏—Å—Ç–∏–Ω–≥–∞—Ö (–µ—Å–ª–∏ Listing Monitor –≤–∫–ª—é—á–µ–Ω)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
  - [ ] `All` ‚Äî –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
  - [ ] `Important` ‚Äî —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –æ—à–∏–±–∫–∏
  - [ ] `Critical` ‚Äî —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
  - [ ] `Off` ‚Äî –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### 10.8. –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/logs` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤:
  - [ ] –§–∏–ª—å—Ç—Ä –ø–æ —É—Ä–æ–≤–Ω—é (INFO, WARN, ERROR)
  - [ ] –§–∏–ª—å—Ç—Ä –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É (Trading, Binance, Hyperliquid)
  - [ ] –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å –ø–æ–ª–Ω—ã–π –ª–æ–≥"
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/debug` ‚Äî debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
  - [ ] NATR —Ç–µ–∫—É—â–∏–π –¥–ª—è –º–æ–Ω–µ—Ç
  - [ ] –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ orderbook
  - [ ] Pending coins (in-flight –ø–æ–∑–∏—Ü–∏–∏)
  - [ ] Anchor memory —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### 10.9. –ë—ç–∫–∞–ø –∏ —ç–∫—Å–ø–æ—Ä—Ç
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/export_config` ‚Äî —Å–∫–∞—á–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (JSON)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/import_config` ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª –±–æ—Ç—É)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/export_trades` ‚Äî —Å–∫–∞—á–∞—Ç—å –≤—Å–µ —Å–¥–µ–ª–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ (CSV)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/export_logs` ‚Äî —Å–∫–∞—á–∞—Ç—å –ª–æ–≥–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥

#### 10.10. Help –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/help` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/guide` ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:
  - [ ] –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á–∏
  - [ ] –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∏—Å–∫
  - [ ] –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
  - [ ] –ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏
- [ ] Inline –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –∫–∞–∂–¥–æ–º –º–µ–Ω—é (–∫–Ω–æ–ø–∫–∞ "‚ùì –ü–æ–º–æ—â—å")

---

## üìä –°–ø—Ä–∏–Ω—Ç 11 ‚Äî –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞)

### –¶–µ–ª—å
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ä–∏—Å–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ Binance Futures —Å —É—á–µ—Ç–æ–º unrealized PnL.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### 11.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Binance Account API
- [ ] –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `getAccountBalance()` –≤ `BinanceExecutionEngine`:
  - [ ] –ó–∞–ø—Ä–æ—Å –∫ `/fapi/v2/account` (Futures)
  - [ ] –ò–∑–≤–ª–µ—á—å `totalWalletBalance` (–≤–µ—Å—å –±–∞–ª–∞–Ω—Å –≤ USDT)
  - [ ] –ò–∑–≤–ª–µ—á—å `totalUnrealizedProfit` (unrealized PnL)
  - [ ] –†–∞—Å—Å—á–∏—Ç–∞—Ç—å `effectiveBalance = totalWalletBalance + totalUnrealizedProfit`
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (–æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–∞–∑ –≤ N –º–∏–Ω—É—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä 5-10 –º–∏–Ω—É—Ç)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API (rate limits, network errors)

#### 11.2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `config.ts`:
  ```typescript
  TRADE_RISK_PERCENT_OF_BALANCE: number (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.0 = 2% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞)
  TRADE_BALANCE_UPDATE_INTERVAL_MIN: number (–∫–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–∞–ª–∞–Ω—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä 5)
  ```
- [ ] –°–æ–∑–¥–∞—Ç—å `DynamicRiskManager` –∫–ª–∞—Å—Å:
  - [ ] `updateBalance()` ‚Äî –∑–∞–ø—Ä–æ—Å –±–∞–ª–∞–Ω—Å–∞ —Å Binance
  - [ ] `calculatePositionSize(coin, natr, referencePrice)` ‚Äî —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞:
    ```
    effectiveBalance = totalWalletBalance + totalUnrealizedProfit
    riskAmountUsd = effectiveBalance * (TRADE_RISK_PERCENT_OF_BALANCE / 100)
    
    –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è NATR-based —Ä–∏—Å–∫:
      priceMovementPercent = natr * TRADE_RISK_NATR_MULTIPLIER
      positionSizeUsd = riskAmountUsd / (priceMovementPercent / 100)
    
    –ï—Å–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä:
      positionSizeUsd = riskAmountUsd (–ø—Ä–æ—Å—Ç–æ % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞)
    ```
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –±–∞–ª–∞–Ω—Å, —Ä–∏—Å–∫ $, —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏

#### 11.3. –†–µ–∂–∏–º—ã —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- [ ] **–†–µ–∂–∏–º 1: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ USD**
  - `TRADE_POSITION_SIZE_USD` ‚Äî —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
  - –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–∂–∏–º
- [ ] **–†–µ–∂–∏–º 2: % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä)**
  - `TRADE_RISK_PERCENT_OF_BALANCE` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
  - `positionSizeUsd = effectiveBalance * (percent / 100)`
  - –†–∞–∑–º–µ—Ä —Ä–∞—Å—Ç–µ—Ç/—É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º
- [ ] **–†–µ–∂–∏–º 3: % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ (NATR-based —Ä–∏—Å–∫)**
  - `TRADE_RISK_PERCENT_OF_BALANCE` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –¥–ª—è —Ä–∏—Å–∫–∞
  - `TRADE_RISK_NATR_MULTIPLIER` ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å NATR
  - –†–∞–∑–º–µ—Ä —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `Risk / (NATR * Multiplier)`
  - –°–∞–º—ã–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∂–∏–º–∞ —á–µ—Ä–µ–∑:
  - [ ] ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  - [ ] Telegram bot inline –º–µ–Ω—é
  - [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è: –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∂–∏–º–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

#### 11.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ç–æ—Ä–≥–æ–≤—ã–π –º–æ–¥—É–ª—å
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `BounceTradingModule.calculatePositionSize()`:
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω
  - [ ] –ï—Å–ª–∏ % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ ‚Äî –≤—ã–∑–≤–∞—Ç—å `DynamicRiskManager`
  - [ ] –ò–Ω–∞—á–µ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –ª–æ–≥–∏–∫—É (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π/NATR)
- [ ] –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞:
  - [ ] –ó–∞–ø—É—Å–∫–∞—Ç—å `updateBalance()` –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç
  - [ ] –ò–ª–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–æ–π (–µ—Å–ª–∏ –Ω–µ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–æ)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  ```
  [DynamicRisk] –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª–µ–Ω: totalWallet=$5000, unrealizedPnL=$+150, effective=$5150
  [DynamicRisk] –†–∏—Å–∫: 2% –æ—Ç $5150 = $103
  [DynamicRisk] BTC NATR=0.8%, multiplier=2, movement=1.6%
  [DynamicRisk] –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: $103 / 1.6% = $6437
  ```

#### 11.5. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Ç–æ—Ä–≥–æ–≤–ª–∏ –ø—Ä–∏ –º–∞–ª–æ–º –¥–µ–ø–æ–∑–∏—Ç–µ
- [ ] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:
  - [ ] `TRADE_MIN_POSITION_SIZE_USD` (–Ω–∞–ø—Ä–∏–º–µ—Ä, $10)
  - [ ] –ï—Å–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä < –º–∏–Ω–∏–º—É–º–∞ ‚Üí –Ω–µ —Ç–æ—Ä–≥—É–µ–º
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª"
- [ ] –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:
  - [ ] `TRADE_MAX_POSITION_SIZE_USD` (–Ω–∞–ø—Ä–∏–º–µ—Ä, $10000)
  - [ ] –ï—Å–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä > –º–∞–∫—Å–∏–º—É–º–∞ ‚Üí –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –º–∞–∫—Å–∏–º—É–º–æ–º"

#### 11.6. Emergency PnL stop —Å —É—á–µ—Ç–æ–º % –¥–µ–ø–æ–∑–∏—Ç–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `checkPnlAndEmergencyClose()`:
  - [ ] –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `TRADE_RISK_PERCENT_OF_BALANCE`:
    - [ ] –†–∞—Å—Å—á–∏—Ç–∞—Ç—å `maxRiskUsd = effectiveBalance * (percent / 100)`
    - [ ] –ó–∞–∫—Ä—ã—Ç—å –µ—Å–ª–∏ `pnlUsd < -maxRiskUsd`
  - [ ] –ò–Ω–∞—á–µ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TRADE_MAX_RISK_PER_TRADE` –∫–∞–∫ —Å–µ–π—á–∞—Å
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  ```
  [Trading] ‚ö†Ô∏è –≠–ö–°–¢–†–ï–ù–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï: BTC LONG PnL=-$105 –ø—Ä–µ–≤—ã—Å–∏–ª maxRisk=-$103 (2% –æ—Ç $5150)
  ```

#### 11.7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `/status` –∫–æ–º–∞–Ω–¥—É Telegram –±–æ—Ç–∞:
  - [ ] –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å (total + unrealized)
  - [ ] –†–µ–∂–∏–º —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞
  - [ ] –¢–µ–∫—É—â–∏–π —Ä–∏—Å–∫ –≤ $ (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π –æ—Ç –±–∞–ª–∞–Ω—Å–∞)
  - [ ] –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ (–ø—Ä–∏–º–µ—Ä)
- [ ] CSV –ª–æ–≥–∏ —Å–¥–µ–ª–æ–∫:
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `balanceAtEntry` ‚Äî –±–∞–ª–∞–Ω—Å –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Ö–æ–¥–∞
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `riskPercentUsed` ‚Äî % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `balanceAfterExit` ‚Äî –±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞

#### 11.8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è `DynamicRiskManager`:
  - [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–∞—Ö
  - [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ unrealized PnL (+ –∏ -)
  - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases (–±–∞–ª–∞–Ω—Å = 0, NATR = 0)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README:
  - [ ] –°–µ–∫—Ü–∏—è "Dynamic Risk Management"
  - [ ] –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–æ–≤
  - [ ] –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–µ–∂–∏–º
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `QUICKSTART.ru.md`:
  - [ ] –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
  - [ ] –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## üóÇÔ∏è –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```
src/
  telegram-bot/
    bot.ts                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å Telegram –±–æ—Ç–∞
    commands.ts               # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (/start, /help, /status)
    keyboards.ts              # Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
    middleware.ts             # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    userManager.ts            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
    notificationManager.ts    # –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
  trading/
    dynamicRiskManager.ts     # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞)
    bounceTradingModule.ts    # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤—ã–π –º–æ–¥—É–ª—å (–æ–±–Ω–æ–≤–ª–µ–Ω)
    binanceExecutionEngine.ts # Binance API (–¥–æ–±–∞–≤–ª–µ–Ω getAccountBalance)
    ...
  config.ts                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
  telegram-bot-index.ts       # Entry point –¥–ª—è Telegram –±–æ—Ç–∞
  index.ts                    # Entry point –¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ (—Ç–µ–∫—É—â–∏–π)

user-configs/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  <telegram_user_id>/
    instance_1.json
    instance_2.json

telegram-bot-whitelist.json   # –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram

.env                          # –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
  TELEGRAM_BOT_TOKEN=...
  TELEGRAM_ADMIN_USERNAME=@your_username
  TRADE_RISK_PERCENT_OF_BALANCE=2.0
  TRADE_BALANCE_UPDATE_INTERVAL_MIN=5
  TRADE_MIN_POSITION_SIZE_USD=10
  TRADE_MAX_POSITION_SIZE_USD=10000
```

---

## üìÖ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: Telegram Bot MVP (–°–ø—Ä–∏–Ω—Ç 10.1 - 10.5)
**–¶–µ–ª—å:** –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–æ—Ç–∞ ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ inline –º–µ–Ω—é.

**–≠—Ç–∞–ø—ã:**
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫, —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ (create, select, delete)
4. Inline –º–µ–Ω—é –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (API, —Ä–µ–∂–∏–º—ã, —Ä–∏—Å–∫, –≤—Ö–æ–¥, TP)
5. –ö–æ–º–∞–Ω–¥—ã —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø —Ç–æ—Ä–≥–æ–≤–ª–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–Ω–∏–º –∏–Ω—Å—Ç–∞–Ω—Å–æ–º –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Telegram.

### –§–∞–∑–∞ 2: Telegram Bot Advanced (–°–ø—Ä–∏–Ω—Ç 10.6 - 10.10)
**–¶–µ–ª—å:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∞–ª–µ—Ä—Ç—ã, –ª–æ–≥–∏, help.

**–≠—Ç–∞–ø—ã:**
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `/status`, `/positions`, `/trades`, `/balance`
2. –ê–ª–µ—Ä—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π, –æ—à–∏–±–∫–∏)
3. –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞: `/logs`, `/debug`
4. –≠–∫—Å–ø–æ—Ä—Ç: `/export_config`, `/export_trades`
5. Help –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `/help`, `/guide`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Telegram bot –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

### –§–∞–∑–∞ 3: Dynamic Risk Management (–°–ø—Ä–∏–Ω—Ç 11)
**–¶–µ–ª—å:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ Binance Futures.

**–≠—Ç–∞–ø—ã:**
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Binance Account API (`getAccountBalance`)
2. –°–æ–∑–¥–∞–Ω–∏–µ `DynamicRiskManager` –∫–ª–∞—Å—Å–∞
3. 3 —Ä–µ–∂–∏–º–∞ —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `BounceTradingModule`
5. Emergency PnL stop —Å —É—á–µ—Ç–æ–º % –¥–µ–ø–æ–∑–∏—Ç–∞
6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π –∫ —Ç–µ–∫—É—â–µ–º—É –±–∞–ª–∞–Ω—Å—É.

### –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–¶–µ–ª—å:** –°–≤—è–∑–∞—Ç—å Telegram bot –∏ Dynamic Risk Management, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å end-to-end.

**–≠—Ç–∞–ø—ã:**
1. –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É "% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞" –≤ Telegram bot –º–µ–Ω—é
2. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –∏ —Ä–∏—Å–∫ –≤ `/status`
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ paper mode
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ live mode (–º–∞–ª—ã–µ —Å—É–º–º—ã)
5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≥–∞–π–¥—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å Telegram —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∏—Å–∫–æ–º.

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç:

1. **–ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞:**
   - ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ (API, —Ä–µ–∂–∏–º—ã, —Ä–∏—Å–∫, entry, TP, policy)
   - ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
   - ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –∏ PnL –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - ‚úÖ –ü–æ–ª—É—á–∞—Ç—å –∞–ª–µ—Ä—Ç—ã –æ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏—è—Ö
   - ‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ (–¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π)
   - ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤–≤–æ–¥–∏—Ç—å API –∫–ª—é—á–∏ (—Å–æ–æ–±—â–µ–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è)

2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫:**
   - ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –¥–µ–ø–æ–∑–∏—Ç—É
   - ‚úÖ –ï—Å–ª–∏ –¥–µ–ø–æ–∑–∏—Ç –≤—ã—Ä–æ—Å ‚Üí –ø–æ–∑–∏—Ü–∏–∏ –±–æ–ª—å—à–µ
   - ‚úÖ –ï—Å–ª–∏ –¥–µ–ø–æ–∑–∏—Ç —É–ø–∞–ª ‚Üí –ø–æ–∑–∏—Ü–∏–∏ –º–µ–Ω—å—à–µ
   - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Ç–æ—Ä–≥–æ–≤–ª–∏ –ø—Ä–∏ –º–∞–ª–æ–º –±–∞–ª–∞–Ω—Å–µ
   - ‚úÖ Emergency stop —Å —É—á–µ—Ç–æ–º % –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - ‚úÖ –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram
   - ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ API —Å–µ–∫—Ä–µ—Ç–æ–≤
   - ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /start
–ë–æ—Ç: –ü—Ä–∏–≤–µ—Ç! –í—ã–±–µ—Ä–∏ –∏–Ω—Å—Ç–∞–Ω—Å –∏–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /new_instance
–ë–æ—Ç: –ò–Ω—Å—Ç–∞–Ω—Å #1 —Å–æ–∑–¥–∞–Ω. –ù–∞—Å—Ç—Ä–æ–π API –∫–ª—é—á–∏ ‚öôÔ∏è
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–Ω–∞–∂–∏–º–∞–µ—Ç "Binance API"]
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤—å API Key:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: abc123...
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤—å API Secret:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: xyz789...
–ë–æ—Ç: [–£–î–ê–õ–Ø–ï–¢ —Å–æ–æ–±—â–µ–Ω–∏–µ] ‚úÖ API –∫–ª—é—á–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–∏—Å–∫: 2% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞]
–ë–æ—Ç: ‚úÖ –†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç: 2% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞ ($5000 ‚Üí $100 —Ä–∏—Å–∫)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: /start_trading
–ë–æ—Ç: ‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –∑–∞–ø—É—â–µ–Ω–∞! –ë–∞–ª–∞–Ω—Å: $5150, –º–∞–∫—Å. –ø–æ–∑–∏—Ü–∏—è: ~$6400
[–ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç]
–ë–æ—Ç: üü¢ OPENED LONG BTC $6400 @ $45000 (—Ä–∏—Å–∫: $100, 2% –æ—Ç $5150)
[–ß–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç]
–ë–æ—Ç: üü¢ CLOSED LONG BTC PnL=+$85 (1.3%)
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã (API keys, private keys) —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: File logger + Telegram alerts –¥–ª—è –ø–æ–ª–Ω–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏
- **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ inline –º–µ–Ω—é
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ö–∞–∂–¥–∞—è —Ñ–∞–∑–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º README –∏ –≥–∞–π–¥–æ–≤

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

1. **Telegram Bot**: 
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `node-telegram-bot-api` –∏–ª–∏ `telegraf`? (telegraf –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π)
   - –ù—É–∂–Ω–∞ –ª–∏ multi-language –ø–æ–¥–¥–µ—Ä–∂–∫–∞? (—Ä—É—Å—Å–∫–∏–π + –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

2. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å master key –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è? (env variable –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `crypto` (Node.js –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) –∏–ª–∏ –≤–Ω–µ—à–Ω—é—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É?

3. **Dynamic Risk**:
   - –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–∞–ª–∞–Ω—Å? (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω / –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–æ–π / –ø–æ –∑–∞–ø—Ä–æ—Å—É)
   - –ù—É–∂–µ–Ω –ª–∏ fallback –µ—Å–ª–∏ Binance API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω? (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å)

4. **–ú—É–ª—å—Ç–∏-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**:
   - –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã? (–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ—â–µ, –Ω–æ –µ—Å—Ç—å —Ä–∏—Å–∫ isolation)
   - –õ–∏–º–∏—Ç –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞–∫—Å. 5 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤)

5. **–ê–ª–µ—Ä—Ç—ã**:
   - –ö–∞–∫–æ–π default —É—Ä–æ–≤–µ–Ω—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π? (`Important` - —Ç–æ–ª—å–∫–æ trades –∏ errors)
   - Rate limiting –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤? (–Ω–µ –±–æ–ª–µ–µ N —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É)

